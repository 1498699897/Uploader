/*!
 * Uploader - Uploader library implements html5 file upload and provides multiple simultaneous, stable, fault tolerant and resumable uploads
 * @version v0.0.1
 * @author dolymood <dolymood@gmail.com>
 * @link https://github.com/dolymood/Uploader
 * @license MIT
 */
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Uploader=t()}}(function(){return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){function i(t){r.each(t.files,function(){}),o.trigger("init")}var r=t("./utils"),o=t("./event");r.extend(i.prototype,{}),e.exports=i},{"./event":2,"./utils":5}],2:[function(t,e,n){var i=t("./utils").each,r={_eventData:null,on:function(t,e){this._eventData||(this._eventData={}),this._eventData[t]||(this._eventData[t]=[]);var n=!1;i(this._eventData[t],function(t){return t===e?(n=!0,!1):void 0}),n||this._eventData[t].push(e)},off:function(t,e){this._eventData||(this._eventData={}),this._eventData[t]&&this._eventData[t].length&&(e?i(this._eventData[t],function(n,i){return n===e?(this._eventData[t].splice(i,1),!1):void 0}):this._eventData[t]=[])},trigger:function(t){if(this._eventData||(this._eventData={}),this._eventData[t]){var e=this._eventData[t].slice.call(arguments,1);i(this._eventData[t],function(t){t.apply(null,e)})}}};e.exports=r},{"./utils":5}],3:[function(t,e,n){function i(t){this.support=l,this.support&&!u&&(this.supportDirectory=c,this.opts=r.extend(i.defaults,t||{}),this.f=new s)}var r=t("./utils"),o=t("./event"),s=t("./file"),a="0.0.1",u=window.navigator.msPointerEnabled,l=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),c=/WebKit/.test(window.navigator.userAgent),f=function(t,e,n,i,r){var o="slice";t.file.slice?o="slice":t.file.mozSlice?o="mozSlice":t.file.webkitSlice&&(o="webkitSlice"),r.readFinished(t.file[o](n,i,e))};i.version=a,i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:f},r.extend(i.prototype,o),r.extend(i.prototype,{_trigger:function(t){var e=r.toArray(arguments,1);this.trigger.apply(this,arguments),"catchAll"!==t&&(e.unshift("catchAll"),this.trigger.apply(this,e))},_triggerAsync:function(){var t=arguments;r.nextTick(function(){this._trigger.apply(this,t)},this)},onDrop:function(t){this.opts.onDropStopPropagation&&t.stopPropagation(),t.preventDefault();var e=t.dataTransfer;e.items&&e.items[0]&&e.items[0].webkitGetAsEntry?this.webkitReadDataTransfer(t):this.addFiles(e.files,t)},webkitReadDataTransfer:function(t){function e(t){t.readEntries(function(s){s.length?(a+=s.length,r.each(s,function(t){if(t.isFile){var r=t.fullPath;t.file(function(t){n(t,r)},i)}else t.isDirectory&&e(t.createReader())}),e(t)):o()},i)}function n(t,e){t.relativePath=e.substring(1),u.push(t),o()}function i(t){throw t}function o(){0===--a&&s.addFiles(u,t)}var s=this,a=t.dataTransfer.items.length,u=[];r.each(t.dataTransfer.items,function(t){var i=t.webkitGetAsEntry();return i?void(i.isFile?n(t.getAsFile(),i.fullPath):e(i.createReader())):void o()})},addFiles:function(t,e){},addFile:function(t,e){this.addFiles([t],e)},uploadNextChunk:function(t){var e=!1;if(this.opts.prioritizeFirstAndLastChunk&&(r.each(this.files,function(t){return!t.paused&&t.chunks.length&&"pending"===t.chunks[0].status()?(t.chunks[0].send(),e=!0,!1):!t.paused&&t.chunks.length>1&&"pending"===t.chunks[t.chunks.length-1].status()?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return e;if(r.each(this.files,function(t){return t.paused||r.each(t.chunks,function(t){return"pending"===t.status()?(t.send(),e=!0,!1):void 0}),e?!1:void 0}),e)return!0;var n=!1;return r.each(this.files,function(t){return t.isComplete()?void 0:(n=!0,!1)}),n||t||this._triggerAsync("complete"),!1},assignBrowse:function(t,e,n,i){"undefined"==typeof t.length&&(t=[t]),r.each(t,function(t){var o;"INPUT"===t.tagName&&"file"===t.type?o=t:(o=document.createElement("input"),o.setAttribute("type","file"),r.extend(o.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),t.appendChild(o),t.addEventListener("click",function(){o.click()},!1)),this.opts.singleFile||n||o.setAttribute("multiple","multiple"),e&&o.setAttribute("webkitdirectory","webkitdirectory"),r.each(i,function(t,e){o.setAttribute(e,t)});var s=this;o.addEventListener("change",function(t){t.target.value&&(s.addFiles(t.target.files,t),t.target.value="")},!1)},this)},assignDrop:function(t){"undefined"==typeof t.length&&(t=[t]),r.each(t,function(t){t.addEventListener("dragover",r.preventEvent,!1),t.addEventListener("dragenter",r.preventEvent,!1),t.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(t){"undefined"==typeof t.length&&(t=[t]),r.each(t,function(t){t.removeEventListener("dragover",r.preventEvent,!1),t.removeEventListener("dragenter",r.preventEvent,!1),t.removeEventListener("drop",this.onDrop,!1)},this)}}),e.exports=i},{"./event":2,"./file":4,"./utils":5}],4:[function(t,e,n){function i(){this.files=[],this.fileList=[],this.chunks=[],this.isFolder=!1,this.chunks.push(new s(this)),o.trigger("init")}var r=t("./utils"),o=t("./event"),s=t("./chunk");r.extend(i.prototype,{}),e.exports=i},{"./chunk":1,"./event":2,"./utils":5}],5:[function(t,e,n){var i=Object.prototype,r=Array.prototype,o=i.toString,s=function(t){return"[object Function]"===o.call(t)},a=Array.isArray||function(t){return"[object Array]"===o.call(t)},u=function(t){return"[object Object]"===o.call(t)&&Object.getPrototypeOf(t)===i},l={noop:function(){},bind:function(t,e){return function(){return t.apply(this,arguments)}},preventEvent:function(t){t.preventDefault()},stop:function(t){t.preventDefault(),t.stopPropagation()},nextTick:function(t,e){setTimeout(l.bind(t,e),0)},toArray:function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.length),r.slice.call(t,e,n)},isPlainObject:u,isFunction:s,isArray:a,isObject:function(t){return Object(t)===t},isString:function(t){return"string"==typeof t},isUndefined:function(t){return"undefined"==typeof t},isDefined:function(t){return"undefined"!=typeof t},each:function(t,e,n){for(var i=0,r=t.length;r>i&&e.call(n,t[i],i,t)!==!1;i++);},extend:function(){var t,e,n,i,r,o,c=arguments[0]||{},f=1,d=arguments.length,p=!1;for("boolean"==typeof c&&(p=c,c=arguments[1]||{},f++),"object"==typeof c||s(c)||(c={}),f===d&&(c=this,f--);d>f;f++)if(null!=(t=arguments[f]))for(e in t)n=c[e],i=t[e],c!==i&&(p&&i&&(u(i)||(r=a(i)))?(r?(r=!1,o=n&&a(n)?n:[]):o=n&&u(n)?n:{},c[e]=l.extend(p,o,i)):void 0!==i&&(c[e]=i));return c}};e.exports=l},{}]},{},[3])(3)});
//# sourceMappingURL=uploader.min.js.map